"use strict";(self.webpackChunkDelivery_App=self.webpackChunkDelivery_App||[]).push([[8446],{58446:function(e,n,a){a.r(n);var i=a(70885),t=a(78983),r=a(77813),l=a(55705),o=a(72791),s=a(59434),c=a(16871),d=a(47652),u=(a(76863),a(73886)),v=a(21985),m=a(17209),h=a(80184);n.default=function(){var e,n,a,f,g,p,x,j,b,N,y,F=(0,s.v9)((function(e){return e.geoFen})),Z=F.coordinates,_=F.isLoader,C=(0,s.v9)((function(e){return e.geoFen.prefieldGEoFenceById})),S=(0,o.useState)(),w=(0,i.Z)(S,2),G=w[0],k=w[1],L=(0,s.I0)(),A=null===(e=Z[0])||void 0===e?void 0:e.latlngs,I=null===C||void 0===C||null===(n=C.theGeoFence)||void 0===n||null===(a=n.coordinates)||void 0===a?void 0:a.map((function(e){return e.lat})),O=null===C||void 0===C||null===(f=C.theGeoFence)||void 0===f||null===(g=f.coordinates)||void 0===g?void 0:g.map((function(e){return e.lng})),T={lat:I&&I[0]?I[0]:30.682421,lng:O&&O[0]?O[0]:76.727631},P=(0,o.useState)([30.682421,76.727631]),z=(0,i.Z)(P,2),D=(z[0],z[1]),E=(0,c.s0)(),U=(0,c.UO)().id,B=null===C||void 0===C||null===(p=C.theGeoFence)||void 0===p?void 0:p.location;(0,o.useEffect)((function(){L((0,u.Z5)(U)),k(B)}),[B,U]);var M=(0,l.TA)({initialValues:{geofencing_name:null!==C&&void 0!==C&&null!==(x=C.theGeoFence)&&void 0!==x&&x.geofencing_name?null===C||void 0===C||null===(j=C.theGeoFence)||void 0===j?void 0:j.geofencing_name:"",location:G,coordinates:A},enableReinitialize:!0,onSubmit:function(e,n){var a=n.resetForm;L((0,u.AC)({coordinates:A,id:U,navigate:E})),a({data:""})}}),R=M.values,V=(M.handleBlur,M.handleChange),$=M.handleSubmit,H=M.errors,J=M.touched;return(0,h.jsxs)(t.xH,{className:"mb-4",children:[_?(0,h.jsx)(m.Z,{className:"modal-spinner"}):null,(0,h.jsx)(r.sl,{children:(0,h.jsx)(t.lx,{onSubmit:$,children:(0,h.jsxs)(t.rb,{children:[(0,h.jsxs)(t.b7,{md:4,children:[(0,h.jsxs)(t.b7,{md:12,className:"mt-2",children:[(0,h.jsxs)("label",{className:"",htmlFor:"validationServer01",children:["Select Team",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(t.LX,{disabled:!0,children:(0,h.jsx)("option",{children:null===C||void 0===C||null===(b=C.theGeoFence)||void 0===b?void 0:b.teamName})})]}),(0,h.jsxs)(t.b7,{md:12,className:"mt-2",children:[(0,h.jsxs)("label",{className:"",htmlFor:"validationServer01",children:["Location",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(d.Z,{setAdress:k,address:G,setCenter:D,value:null===C||void 0===C||null===(N=C.theGeoFence)||void 0===N?void 0:N.location,disabled:C}),(0,h.jsx)("div",{className:"error-container",children:J.location&&H.location?(0,h.jsx)("span",{className:"validtion-error",children:H.location}):null})]}),(0,h.jsxs)(t.b7,{md:12,className:"mt-2",children:[(0,h.jsxs)("label",{className:"",htmlFor:"validationServer01",children:["GeoFence Name",(0,h.jsx)("span",{className:"text-danger",children:"*"})]}),(0,h.jsx)(t.jO,{type:"text",id:"validationServer01",name:"geofencing_name",className:"addGeoFence-geofencing_name",value:R.geofencing_name,onChange:V,disabled:!0}),(0,h.jsx)("div",{className:"error-container",children:J.geofencing_name&&H.geofencing_name?(0,h.jsx)("span",{className:"validtion-error",children:H.geofencing_name}):null})]}),(0,h.jsxs)(t.b7,{md:12,className:"d-flex justify-content-between mt-3 gap-5",children:[(0,h.jsx)(t.u5,{color:"secondary",className:"w-50 text-white",onClick:function(){return E("/dispatcher/geoFence")},children:"Cancel"}),(0,h.jsx)(t.u5,{type:"submit",color:"info",className:"w-50 text-white",children:"Update"})]})]}),(0,h.jsx)(t.b7,{md:8,children:(0,h.jsxs)("div",{className:"mt-2",children:[(0,h.jsx)("span",{style:{marginLeft:"15px"},children:J.coordinates&&H.coordinates?(0,h.jsx)("span",{className:"validtion-error",children:H.coordinates}):null}),(0,h.jsx)(v.Z,{center:T,polygonCoords:null===C||void 0===C||null===(y=C.theGeoFence)||void 0===y?void 0:y.coordinates})]})})]})})})]})}},47652:function(e,n,a){var i=a(1413),t=a(74165),r=a(15861),l=a(78983),o=(a(72791),a(20382)),s=a(80184);n.Z=function(e){var n=e.setAdress,a=e.address,c=e.setCenter,d=e.disabled,u=function(){var e=(0,r.Z)((0,t.Z)().mark((function e(a){var i,r,l,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,o.NU)(a);case 2:return i=e.sent,e.next=5,(0,o.WV)(i[0]);case 5:r=e.sent,n(a),l=null===r||void 0===r?void 0:r.lat,s=null===r||void 0===r?void 0:r.lng,c([l,s]);case 10:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(o.ZP,{value:a,onChange:n,onSelect:u,children:function(e){var n=e.getInputProps,a=e.suggestions,t=e.getSuggestionItemProps,r=e.loading;return(0,s.jsxs)("div",{children:[(0,s.jsx)(l.jO,(0,i.Z)((0,i.Z)({},n({placeholder:"Search Places ...",className:"location-search-input-addgeofence"})),{},{className:"addGeoFence-geofencing_name",disabled:void 0!==d})),(0,s.jsxs)("div",{className:"autocomplete-dropdown-container",children:[r&&(0,s.jsx)("div",{children:"Loading..."}),a.map((function(e){var n=e.active?"suggestion-item--active":"suggestion-item",a=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return(0,s.jsx)("div",(0,i.Z)((0,i.Z)({},t(e,{className:n,style:a})),{},{children:(0,s.jsx)("span",{children:e.description})}))}))]})]})}})})}},21985:function(e,n,a){var i=a(42982),t=a(70885),r=a(72791),l=a(46293),o=a(69961),s=a(17626),c=a(55259),d=a(34886),u=a(44993),v=(a(23666),a(71396),a(59434)),m=a(73886),h=a(80184);function f(e){var n=e.center;return(0,l.Sx)().flyTo(n,11),null}n.Z=function(e){var n=e.center,a=e.polygonCoords,l=(0,r.useState)([]),g=(0,t.Z)(l,2),p=g[0],x=g[1],j=(0,v.I0)();(0,r.useEffect)((function(){j((0,m.YJ)(p))}),[p]);var b=(0,r.useRef)();return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)("div",{className:"col",children:(0,h.jsxs)(o.h,{center:n,zoom:4,style:{height:"60vh",width:"100%"},ref:b,attributionControl:!1,children:[(0,h.jsx)(s.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.maptiler.com/">MapTiler</a> \xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),(0,h.jsx)(c.$,{children:(0,h.jsx)(u.$,{position:"topright",onCreated:function(e){var n=e.layerType,a=e.layer;if("polygon"===n){var t=a._leaflet_id;x((function(e){return[].concat((0,i.Z)(e),[{id:t,latlngs:a.getLatLngs()[0]}])}))}},onDeleted:function(e){var n=e.layers._layers;Object.values(n).map((function(e){var n=e._leaflet_id;x((function(e){return e.filter((function(e){return e.id!==n}))}))}))},edit:{remove:!0,edit:!1},draw:{rectangle:!1,circle:!1,circlemarker:!1,marker:!1,polyline:!1}})}),(0,h.jsx)(d.m,{positions:a||[]}),(0,h.jsx)(f,{center:n})]})})})}}}]);
//# sourceMappingURL=8446.8b00d7e8.chunk.js.map