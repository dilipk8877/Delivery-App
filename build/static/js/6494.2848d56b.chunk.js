"use strict";(self.webpackChunkDelivery_App=self.webpackChunkDelivery_App||[]).push([[6494],{6494:function(e,r,i){i.r(r);var t=i(74165),a=i(15861),n=i(4942),s=i(70885),u=i(78983),l=i(77813),d=i(55705),o=i(72791),m=i(59434),c=i(16871),h=i(48639),q=i(79172),b=i(47652),p=(i(76863),i(73886)),g=i(21985),f=i(17209),y=i(46966),x=i(80184);r.default=function(){var e,r=(0,o.useState)(""),i=(0,s.Z)(r,2),_=i[0],Z=i[1],v=(0,m.v9)((function(e){return e.geoFen})),N=v.coordinates,j=v.isLoader,P=null===(e=N[0])||void 0===e?void 0:e.latlngs,R=(0,m.v9)((function(e){return e.team.teamsList})),S=(0,o.useState)(null),w=(0,s.Z)(S,2),D=w[0],F=w[1],C=(0,o.useState)([30.682421,76.727631]),T=(0,s.Z)(C,2),A=T[0],I=T[1],B=(0,c.s0)(),E=(0,m.I0)(),O=null===D||void 0===D?void 0:D.label,L=[],z=null===R||void 0===R?void 0:R.teamList;null===z||void 0===z||z.forEach((function(e){L.push((0,n.Z)({value:"".concat(e.team_name),label:"".concat(e.team_name)},"value",e.id))})),(0,o.useEffect)((function(){E((0,q.LK)())}),[]),(0,o.useEffect)((function(){console.log(A)}),[A]);var $=(0,d.TA)({initialValues:{geofencing_name:"",description:"",location:_,teamName:O,coordinates:P},validationSchema:y.M3,onSubmit:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r,i){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i.resetForm,e.prev=1,e.next=4,E((0,p.Zn)({geofencing_name:r.geofencing_name,description:r.description,location:_,coordinates:P,teamName:O,navigate:B})).unwrap();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(1),console.log(e.t0);case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(r,i){return e.apply(this,arguments)}}()}),k=$.values,M=$.handleBlur,V=$.handleChange,G=$.handleSubmit,K=$.errors,W=$.touched,Y=$.setFieldValue;$.resetForm;return(0,o.useEffect)((function(){Y("teamName",O),Y("location",_),Y("coordinates",P)}),[O,_,P]),(0,x.jsxs)(u.xH,{className:"mb-4",children:[j?(0,x.jsx)(f.Z,{className:"modal-spinner"}):null,(0,x.jsx)(l.sl,{children:(0,x.jsx)(u.lx,{onSubmit:G,children:(0,x.jsxs)(u.rb,{children:[(0,x.jsxs)(u.b7,{md:4,children:[(0,x.jsxs)(u.b7,{md:12,className:"mt-2",children:[(0,x.jsxs)("label",{className:"",htmlFor:"validationServer01",children:["Select Team",(0,x.jsx)("span",{className:"text-danger",children:"*"})]}),(0,x.jsx)(h.ZP,{className:"addGeoFence-dropdown",classNamePrefix:"Select",isClearable:!0,name:"teamName",onChange:F,options:L,onBlur:M}),(0,x.jsx)("div",{className:"error-container",children:W.teamName&&K.teamName?(0,x.jsx)("span",{className:"validtion-error",children:K.teamName}):null})]}),(0,x.jsxs)(u.b7,{md:12,className:"mt-2",children:[(0,x.jsxs)("label",{className:"",htmlFor:"validationServer01",children:["Location",(0,x.jsx)("span",{className:"text-danger",children:"*"})]}),(0,x.jsx)(b.Z,{setAdress:Z,address:_,setCenter:I}),(0,x.jsx)("div",{className:"error-container",children:W.location&&K.location?(0,x.jsx)("span",{className:"validtion-error",children:K.location}):null})]}),(0,x.jsxs)(u.b7,{md:12,className:"mt-2",children:[(0,x.jsxs)("label",{className:"",htmlFor:"validationServer01",children:["GeoFence Name",(0,x.jsx)("span",{className:"text-danger",children:"*"})]}),(0,x.jsx)(u.jO,{type:"text",id:"validationServer01",name:"geofencing_name",className:"addGeoFence-geofencing_name",value:k.geofencing_name,onChange:V,onBlur:M}),(0,x.jsx)("div",{className:"error-container",children:W.geofencing_name&&K.geofencing_name?(0,x.jsx)("span",{className:"validtion-error",children:K.geofencing_name}):null})]}),(0,x.jsxs)(u.b7,{md:12,className:"mt-2",children:[(0,x.jsxs)("label",{className:"",htmlFor:"validationServer01",children:["Description"," ",(0,x.jsx)("span",{style:{fontSize:"12px"},children:"(Optional) "})]}),(0,x.jsx)(u.PB,{id:"validationServer01",name:"description",className:"addGeoFence-geofencing_name",value:k.description,onChange:V,onBlur:M})]}),(0,x.jsxs)(u.b7,{md:12,className:"d-flex justify-content-between mt-2 gap-5",children:[(0,x.jsx)(u.u5,{color:"secondary",className:"w-50 text-white",onClick:function(){return B("/dispatcher/geoFence")},children:"Cancel"}),(0,x.jsx)(u.u5,{type:"submit",color:"info",className:"w-50 text-white",children:"Submit"})]})]}),(0,x.jsx)(u.b7,{md:8,children:(0,x.jsxs)("div",{className:"mt-2",children:[(0,x.jsx)("span",{style:{marginLeft:"15px"},children:(0,x.jsx)("div",{className:"error-container",children:W.coordinates&&K.coordinates?(0,x.jsx)("span",{className:"validtion-error",children:K.coordinates}):null})}),(0,x.jsx)(g.Z,{center:A})]})})]})})})]})}},47652:function(e,r,i){var t=i(1413),a=i(74165),n=i(15861),s=i(78983),u=(i(72791),i(20382)),l=i(80184);r.Z=function(e){var r=e.setAdress,i=e.address,d=e.setCenter,o=e.disabled,m=function(){var e=(0,n.Z)((0,a.Z)().mark((function e(i){var t,n,s,l;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,u.NU)(i);case 2:return t=e.sent,e.next=5,(0,u.WV)(t[0]);case 5:n=e.sent,r(i),s=null===n||void 0===n?void 0:n.lat,l=null===n||void 0===n?void 0:n.lng,d([s,l]);case 10:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}();return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(u.ZP,{value:i,onChange:r,onSelect:m,children:function(e){var r=e.getInputProps,i=e.suggestions,a=e.getSuggestionItemProps,n=e.loading;return(0,l.jsxs)("div",{children:[(0,l.jsx)(s.jO,(0,t.Z)((0,t.Z)({},r({placeholder:"Search Places ...",className:"location-search-input-addgeofence"})),{},{className:"addGeoFence-geofencing_name",disabled:void 0!==o})),(0,l.jsxs)("div",{className:"autocomplete-dropdown-container",children:[n&&(0,l.jsx)("div",{children:"Loading..."}),i.map((function(e){var r=e.active?"suggestion-item--active":"suggestion-item",i=e.active?{backgroundColor:"#fafafa",cursor:"pointer"}:{backgroundColor:"#ffffff",cursor:"pointer"};return(0,l.jsx)("div",(0,t.Z)((0,t.Z)({},a(e,{className:r,style:i})),{},{children:(0,l.jsx)("span",{children:e.description})}))}))]})]})}})})}},21985:function(e,r,i){var t=i(42982),a=i(70885),n=i(72791),s=i(46293),u=i(69961),l=i(17626),d=i(55259),o=i(34886),m=i(44993),c=(i(23666),i(71396),i(59434)),h=i(73886),q=i(80184);function b(e){var r=e.center;return(0,s.Sx)().flyTo(r,11),null}r.Z=function(e){var r=e.center,i=e.polygonCoords,s=(0,n.useState)([]),p=(0,a.Z)(s,2),g=p[0],f=p[1],y=(0,c.I0)();(0,n.useEffect)((function(){y((0,h.YJ)(g))}),[g]);var x=(0,n.useRef)();return(0,q.jsx)(q.Fragment,{children:(0,q.jsx)("div",{className:"col",children:(0,q.jsxs)(u.h,{center:r,zoom:4,style:{height:"60vh",width:"100%"},ref:x,attributionControl:!1,children:[(0,q.jsx)(l.I,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'\xa9 <a href="https://www.maptiler.com/">MapTiler</a> \xa9 <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'}),(0,q.jsx)(d.$,{children:(0,q.jsx)(m.$,{position:"topright",onCreated:function(e){var r=e.layerType,i=e.layer;if("polygon"===r){var a=i._leaflet_id;f((function(e){return[].concat((0,t.Z)(e),[{id:a,latlngs:i.getLatLngs()[0]}])}))}},onDeleted:function(e){var r=e.layers._layers;Object.values(r).map((function(e){var r=e._leaflet_id;f((function(e){return e.filter((function(e){return e.id!==r}))}))}))},edit:{remove:!0,edit:!1},draw:{rectangle:!1,circle:!1,circlemarker:!1,marker:!1,polyline:!1}})}),(0,q.jsx)(o.m,{positions:i||[]}),(0,q.jsx)(b,{center:r})]})})})}},46966:function(e,r,i){i.d(r,{ld:function(){return p},M3:function(){return c},tl:function(){return h},BT:function(){return y},Dl:function(){return _},r7:function(){return q},fN:function(){return j},G3:function(){return b},K7:function(){return o},b6:function(){return m},Cp:function(){return f},X8:function(){return x},pj:function(){return v},$2:function(){return N},Sn:function(){return g},tw:function(){return Z}});var t=5e6,a=i(76863),n=/((https?):\/\/)?(www.)?[a-z0-9]+(\.[a-z]{2,}){1,3}(#?\/?[a-zA-Z0-9#]+)*\/?(\?[a-zA-Z0-9-_]+=[a-zA-Z0-9-%]+&?)?$/,s=["","image/jpg","image/jpeg","image/png"],u=["text/csv"],l=/^[a-zA-Z]*$/,d=/^[a-zA-Z0-9_]*$/,o=a.Ry({teamId:a.Z_().required("Please Select Team Id, It is required"),type:a.Z_().required("Please Select Agent Type, It is required"),first_name:a.Z_().required("First Name is required").trim("First Name is required").matches(l,"Only alphabets are allowed"),last_name:a.Z_().required("Last Name is required").trim("Last Name is required").matches(l,"Only alphabets are allowed"),email:a.Z_().email("Email must be a valid email").required("Email is required"),mobile:a.Z_().required("Phone number is required").min(13,"Phone number must be exactly 10 digits").max(13,"Phone number must be exactly 10 digits"),website:a.Z_().required("Website is required").trim("Website is required").matches(n,"Enter correct website url!"),dob:a.Z_().required("Please Select DOB, It is required"),plate_number:a.Z_().required("Vehicle Number is required").trim("Vehicle Number is required"),vehicle_type:a.Z_().required("Please Select Vehicle Type, It is required"),delivery_area:a.Z_().required("Delievery Area is required").trim("Delievery Area is required")}),m=a.Ry({maxRadius:a.Z_().required("Max Raduis is Required")}),c=a.Ry({geofencing_name:a.Z_().required("Geo Fence Name is Required"),location:a.Z_().required("Location is Required, and Assign Area to Team"),teamName:a.Z_().required("Select Team Name, It is Required"),coordinates:a.IX().required("Assign Area to Team")}),h=a.Ry({first_name:a.Z_().required("First Name is required").trim("First Name is required").matches(l,"Only alphabets are allowed"),last_name:a.Z_().required("Last Name is required").trim("Last Name is required").matches(l,"Only alphabets are allowed"),email:a.Z_().email("Email must be a valid email").required("Email is required").trim("Email is required"),mobile:a.Z_().required("Phone number is required").min(13,"Phone number must be exactly 10 digits").max(13,"Phone number must be exactly 10 digits"),status:a.Z_().required("Please Select Status, It's required")}),q=a.Ry({name:a.Z_().required("Name is Required").trim("Name is Required"),geoFenceId:a.Z_().required("Please Select Geo Fence").nullable(),teamId:a.Z_().required("Please Select Team Name").nullable(),agentVehicle:a.Z_().required("Please Select Vehicle Type").nullable(),basePrice:a.Z_().required("Base Price is Required").test("Is positive?","The number must be greater than 0!",(function(e){return e>0})).matches(/^[0-9]+$/,"Base Price must be only number").min(0,"Base Price must be exactly 0 digits").max(4,"Base Price must be exactly 4 digits"),baseDuration:a.Z_().required("Base Duration is Required").test("Is positive?","The number must be greater than 0!",(function(e){return e>0})).matches(/^[0-9]+$/,"Base Duration must be only number").min(0,"Base Duration must be exactly 0 digits").max(4,"Base Duration must be exactly 4 digits"),baseDistance:a.Z_().required("Base Distance is Required").test("Is positive?","The number must be greater than 0!",(function(e){return e>0})).matches(/^[0-9]+$/,"Base Distance must be only number").min(0,"Base Distance must be exactly 0 digits").max(4,"Base Distance must be exactly 4 digits"),DurationPrice:a.Z_().required("Duration Price is Required").test("Is positive?","The number must be greater than 0!",(function(e){return e>0})).matches(/^[0-9]+$/,"Duration Price must be only number").min(0,"Duration Price must be exactly 0 digits").max(4,"Duration Price must be exactly 4 digits"),DistanceFee:a.Z_().required("Distance Fee is Required").test("Is positive?","The number must be greater than 0!",(function(e){return e>0})).matches(/^[0-9]+$/,"Distance Fee must be only number").min(0,"Distance Fee must be exactly 0 digits").max(4,"Distance Fee must be exactly 4 digits"),agentCommPercnt:a.Z_().required("Agent Commission Percentage is Required").test("Is positive?","The number must be greater than 0!",(function(e){return e>0})).matches(/^[0-9]+$/,"Agent Commission Percentage must be only number").min(0,"Agent Commission Percentage must be exactly 0 digits").max(4,"Agent Commission Percentage must be exactly 4 digits")}),b=a.Ry({team_name:a.Z_().required("Team Name is required").trim("Team Name is required"),team_tag:a.Z_().required("Team tag is required").trim("Team tag is required")}),p=a.Ry({first_name:a.Z_().required("First Name is required").matches(l,"Only alphabets are allowed"),last_name:a.Z_().required("Last Name is required").matches(l,"Only alphabets are allowed"),email:a.Z_().email("Email must be a valid email").required("Email is required"),mobile:a.Z_().required("Phone number is required").min(13,"Phone number Must be exactly 10 digits").max(13,"Phone number Must be exactly 10 digits")}),g=a.Ry({first_name:a.Z_().required("First Name is required").matches(l,"Only alphabets are allowed"),last_name:a.Z_().required("Last Name is required").matches(l,"Only alphabets are allowed"),mobile:a.Z_().required("Phone number is required").min(13,"Phone number must be exactly 10 digits").max(13,"Phone number must be exactly 10 digits").required("Phone number is required")}),f=a.Ry({file:a.nK().required(" File is required").test("type","You can upload only CSV file",(function(e){return e&&u.includes(e.type)}))}),y=a.Ry({first_name:a.Z_().required("First Name is required").trim("First Name is required").matches(l,"Only alphabets are allowed"),last_name:a.Z_().required("Last Name is required").trim("Last Name is required").matches(l,"Only alphabets are allowed"),email:a.Z_().email("Email must be a valid email").required("Email is required"),mobile:a.Z_().required("Phone number is required").min(13,"Phone number must be exactly 10 digits").max(13,"Phone number must be exactly 10 digits"),pincode:a.Z_().required("Pincode is required").matches(/^[0-9]+$/,"Pincode must be only number").min(6,"Pincode must be exactly 6 digits").max(6,"Pincode must be exactly 6 digits"),address:a.Z_().required("Address is required").trim("Address is required"),website:a.Z_().required("Website is required").trim("Website is required").matches(n,"Enter correct website url!"),state:a.Z_().required("State is required"),district:a.Z_().required("District is required"),country:a.Z_().required("Country is required")}),x=a.Ry({file:a.nK().required("File is required").test("type","You can upload only CSV file",(function(e){return e&&u.includes(e.type)}))}),_=a.Ry({name:a.Z_().required("Banner Name is Required").trim("Banner Name is Required"),startDate:a.Z_().required("Start Date is Required"),endDate:a.Z_().required("End Date is Required"),bannerImages:a.nK().required(" File is required").test("file_size","File Size is too large",(function(e){return e&&e.size<=t})).test("fileFormat","You can upload only jpg,png,jpeg file",(function(e){return e&&s.includes(e.type)}))}),Z=a.Ry({name:a.Z_().required("Banner Name is Required").trim("Banner Name is Required"),startDate:a.Z_().required("Start Date is Required"),endDate:a.Z_().required("End Date is Required")}),v=a.Ry({email:a.Z_().required("Email is required"),password:a.Z_().required("Password is required")}),N=a.Ry({profileImage:a.nK().test("file_size","File Size is too large",(function(e){return!e||e.size<=t})).test("fileType","You can upload only jpg,png,jpeg file",(function(e){return!e||["image/jpg","image/jpeg","image/png"].includes(e.type)})),first_name:a.Z_().required("Name is Required").matches(l,"Only alphabets are allowed"),last_name:a.Z_().required("Name is Required").matches(l,"Only alphabets are allowed"),mobile:a.Z_().required("Phone number is required").min(13,"Phone number must be exactly 10 digits").max(13,"Phone number must be exactly 10 digits"),company_address:a.Z_().required("Company Address is Required").trim("Company Address is Required"),company_name:a.Z_().required("Company Name is Required").trim("Company Name is Required").matches(l,"Only alphabets are allowed"),short_code:a.Z_().required("Short Code is Required").min(6,"Must be exactly 6 digits").max(6,"Must be exactly 6 digits").matches(d,"Special Characters not allowed").trim("Short Code is Required"),country:a.Z_().required("Country is Required").trim("Country is Required").matches(l,"Only alphabets are allowed")}),j=a.Ry({Title:a.Z_().required("Title is required").matches(d,"Special Characters not allowed"),Description:a.Z_().required("Short Description is required"),promo_code:a.Z_().required("Promocode is required").matches(d,"Special Characters not allowed"),Promo_Type:a.Z_().required("Promo type is required"),discount:a.Z_().required("Discount is required").matches(/^[0-9]+$/,"Must be only number").max(2,"Amount should be less than 100"),ExpiryDate:a.Z_().required("Expire Date is required")})}}]);
//# sourceMappingURL=6494.2848d56b.chunk.js.map